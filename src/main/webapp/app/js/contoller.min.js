"use strict";angular.module("app.controlles",[]).controller("MainController",function(b,a,d,c,f){e();function e(){b.mainInterval=3000;var h=b.slides=[];var j=1;b.addSlide=function(){h.push({image:"images/"+j+".jpeg",text:["deatils","deatils","deatils"][h.length%3]+" "+[".................",".............",".............."][h.length%3]});j++};for(var g=0;g<3;g++){b.addSlide()}a.get(function(i){b.users=i.users;b.adverts=i.adverts})}b.searchCommand={keyword:"",radius:"",autoComplete:{details:null,options:{country:"pl",types:"(cities)"},getLatitude:function(){if(null==this.details){return""}return this.details.geometry.location.lat()},getLongitude:function(){if(null==this.details){return""}return this.details.geometry.location.lng()}},getSearchCriteria:function(){return{keyWords:this.keyword,locLatitude:this.autoComplete.getLatitude(),locLongitude:this.autoComplete.getLongitude(),locRadius:this.radius}},search:function(){var g=this.getSearchCriteria();d.search(g,0,10).success(function(h){d.setResult(g,h);f.path("/search")})}}}).controller("LoginController",function(c,a,g,e,b,f){c.login={rememberMe:false,login:function(h){b.authenticate($.param({username:c.username,password:c.password}),function(i){var j=i.token;a.authToken=j;if(c.login.rememberMe){e.put("authToken",j)}b.get(function(k){a.user=k;g.path("/");c.dismiss(h)})})},register:{user:null,autoComplete:{details:null,options:{country:"pl",types:"(cities)"},getLatitude:function(){if(null==this.details){return""}return this.details.geometry.location.lat()},getLongitude:function(){if(null==this.details){return""}return this.details.geometry.location.lng()}},save:function(h){if(c.userForm.$valid){c.login.register.user.lat=this.autoComplete.getLatitude();c.login.register.user.lng=this.autoComplete.getLongitude();c.login.register.user.$save(function(i){g.path("/");c.dismiss(i)})}else{scrollTop()}}}};d();function d(){c.login.register.user=new f()}}).controller("CreateAdvertController",function(b,a,e,c){d();function d(){b.saveCommand.advert=new c();c.createNew(function(f){b.saveCommand.advert=f})}b.open=function(f){f.preventDefault();f.stopPropagation();b.opened=true};b.saveCommand={advert:null,autoComplete:{details:null,options:{country:"pl",types:"(cities)"},getLatitude:function(){if(null==this.details){return""}return this.details.geometry.location.lat()},getLongitude:function(){if(null==this.details){return""}return this.details.geometry.location.lng()}},save:function(){if(b.advertForm.$valid){b.saveCommand.advert.latitude=this.autoComplete.getLatitude();b.saveCommand.advert.longitude=this.autoComplete.getLongitude();b.saveCommand.advert.$save(function(){e.path("/")})}else{scrollTop()}}}}).controller("SearchController",function(a,c,b){e();function e(){var f=c.getData();d(f)}function d(f){a.currentPage=f.number;a.adverts=f.content;a.totalElements=f.totalElements;a.totalPages=f.totalPages}a.loadPage=function(g){var f=c.getSearchCriteria();c.search(f,g,a.pageSize).success(function(h){d(h)})};a.prevPage=function(){if(a.currentPage>0){a.loadPage(a.currentPage-1)}};a.nextPage=function(){if(a.currentPage<a.totalPages-1){a.loadPage(a.currentPage+1)}};a.getNumber=function(f){return new Array(f)};a.remove=function(f){}}).controller("AccountController",function(b,a,g,d,f,c){e();function e(){f.get({id:d.id},function(h){b.user=h});f.getAdverts({id:a.user.id},function(h){b.count=h.length})}});